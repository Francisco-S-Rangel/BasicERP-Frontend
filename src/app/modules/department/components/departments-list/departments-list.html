<div class="flex flex-col items-center justify-center">
  <div class="w-full mt-25 mb-10">
    <div class="w-4/5 mx-auto flex">
      <app-search-bar class="w-full" (searchEvent)="onSearch($event)"></app-search-bar>
      <button type="button" class="py-2 px-4 me-2 mb-2 text-sm font-medium cursor-pointer text-gray-600 
      focus:outline-none bg-white rounded-lg border border-gray-100 hover:bg-gray-100 hover:text-gray-800 focus:z-1"
      (click)="createDepartment()">
        Create Department
      </button>
    </div>
    @for (department of _departments; track department.departmentValues.id) {
      <div class="w-4/5 mx-auto bg-white border border-gray-50 rounded-lg shadow-sm mt-5">
        <div class="flex">
          <button
            class="w-1/2 py-3 text-center font-semibold text-gray-800 rounded-tl-lg border-b-2 cursor-pointer"
            [ngClass]="{
              'border-gray-200 bg-gray-100': department.activeTab === 0,
              'border-transparent hover:bg-gray-50': department.activeTab !== 0
            }"
            (click)="department.activeTab = 0"
          >
            Info
          </button>
          <button
            class="w-1/2 py-3 text-center font-semibold text-gray-800 rounded-tr-lg border-b-2 cursor-pointer"
            [ngClass]="{
              'border-gray-200 bg-gray-100': department.activeTab === 1,
              'border-transparent hover:bg-gray-50': department.activeTab !== 1
            }"
            (click)="department.activeTab = 1"
          >
            Details
          </button>
        </div>

        <div class="h-[1px] bg-gray-200"></div>

        @if (department.activeTab === 0) {
          <div class="p-6">
            <div
              class="w-full flex flex-col items-center bg-gray-100 border border-gray-200 rounded-lg shadow-sm md:flex-row hover:bg-gray-250 dark:border-gray-250 dark:hover:bg-gray-250"
            >
              <img
                class="object-cover w-full rounded-t-lg h-96 md:h-auto md:w-62 md:rounded-none md:rounded-s-lg"
                src="{{department.departmentValues.imageUrl}}"
              />
              <div class="w-full flex flex-col items-center justify-center p-4">
                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-800">
                  {{department.departmentValues.name}}<span *ngIf="department.departmentValues.acronym"> - {{department.departmentValues.acronym}}</span>
                </h5>
                <p class="mb-3 font-normal text-gray-700">
                  {{department.departmentValues.description}}
                </p>
              </div>
            </div>
          </div>
        }

        @if (department.activeTab === 1) {
          <div class="p-6">
            <div
              class="w-full flex justify-around bg-gray-100 border border-gray-200 rounded-lg shadow-sm p-6 hover:bg-gray-250 dark:border-gray-250 dark:hover:bg-gray-250"
            >
              <div class="w-full flex-col items-center">
                <h5 class="mb-2 text-xl font-bold text-gray-800">Status: 
                  <span [ngClass]="{
                    'text-green-700': department.departmentValues.isActive,
                    'text-red-700': !department.departmentValues.isActive
                  }" class="text-1xl font-bold">{{department.departmentValues.isActive? 'Active': 'Inactive'}}</span>
                </h5>
                <p class="font-bold text-gray-700">Creation Date: {{department.departmentValues.creationDate | date: 'MM/dd/yyyy'}}</p>
              </div>
              <div class="w-full flex flex-col items-center">
                <button class="bg-gray-500 text-white hover:bg-gray-700 font-medium rounded-full text-sm text-center me-2 mb-2 px-5 py-2 cursor-pointer">
                  Edit department
                </button>
                <button class="bg-blue-700 text-white hover:bg-blue-900 font-medium rounded-full text-sm text-center me-2 mb-2 px-5 py-2 cursor-pointer">
                  Check employees in the department
                </button>
              </div>
            </div>
        </div>
        }
      </div>
    } @empty {
      <div class="w-4/5 mx-auto flex bg-white border-gray-700 rounded-lg shadow-sm mt-5">
        <div class="w-full flex flex-col items-center justify-center p-5">
          <div class="mb-2 text-2xl font-bold tracking-tight text-gray-500">
            There are no Departments
          </div>
        </div>
      </div>
    }
  </div>
</div>
